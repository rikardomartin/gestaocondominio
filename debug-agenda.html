<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Agenda</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        
        .debug-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .debug-title {
            color: #333;
            margin-bottom: 10px;
        }
        
        .debug-result {
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h2 class="debug-title">üîç Debug da Agenda do Sal√£o</h2>
        <button onclick="debugElements()">Verificar Elementos</button>
        <button onclick="debugFunctions()">Verificar Fun√ß√µes</button>
        <button onclick="debugEventListeners()">Verificar Event Listeners</button>
        <button onclick="testAgendaModal()">Testar Modal</button>
        <div id="debugResults"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('debugResults');
            const div = document.createElement('div');
            div.className = `debug-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        function clearLog() {
            document.getElementById('debugResults').innerHTML = '';
        }
        
        function debugElements() {
            clearLog();
            log('üîç Verificando elementos da agenda...', 'info');
            
            // Verificar bot√£o da agenda
            const openBtn = document.getElementById('openAgendaBtn');
            if (openBtn) {
                log('‚úÖ Bot√£o openAgendaBtn encontrado', 'success');
                log(`   - Vis√≠vel: ${openBtn.offsetWidth > 0 && openBtn.offsetHeight > 0}`, 'info');
                log(`   - Classes: ${openBtn.className}`, 'info');
                log(`   - Display: ${getComputedStyle(openBtn).display}`, 'info');
            } else {
                log('‚ùå Bot√£o openAgendaBtn N√ÉO encontrado', 'error');
            }
            
            // Verificar modal
            const modal = document.getElementById('agendaModal');
            if (modal) {
                log('‚úÖ Modal agendaModal encontrado', 'success');
                log(`   - Classes: ${modal.className}`, 'info');
                log(`   - Display: ${getComputedStyle(modal).display}`, 'info');
            } else {
                log('‚ùå Modal agendaModal N√ÉO encontrado', 'error');
            }
            
            // Verificar outros elementos
            const elements = [
                'agendaModalTitle',
                'agendaMonthYear',
                'closeAgendaModal',
                'closeAgendaModalBtn',
                'availableDays',
                'reservedDays',
                'paidReservations',
                'reservationsList',
                'exportAgenda'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    log(`‚úÖ ${id} encontrado`, 'success');
                } else {
                    log(`‚ùå ${id} N√ÉO encontrado`, 'error');
                }
            });
        }
        
        function debugFunctions() {
            clearLog();
            log('üîç Verificando fun√ß√µes da agenda...', 'info');
            
            const functions = [
                'openAgendaModal',
                'hideAgendaModal',
                'loadAgendaData',
                'renderReservationsList',
                'exportAgendaToCSV'
            ];
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    log(`‚úÖ Fun√ß√£o ${funcName} encontrada`, 'success');
                } else {
                    log(`‚ùå Fun√ß√£o ${funcName} N√ÉO encontrada`, 'error');
                }
            });
        }
        
        function debugEventListeners() {
            clearLog();
            log('üîç Verificando event listeners...', 'info');
            
            const openBtn = document.getElementById('openAgendaBtn');
            if (openBtn) {
                // Tentar adicionar um listener de teste
                openBtn.addEventListener('click', function testListener() {
                    log('‚úÖ Event listener funcionando!', 'success');
                    openBtn.removeEventListener('click', testListener);
                });
                
                // Simular clique
                setTimeout(() => {
                    openBtn.click();
                }, 100);
            } else {
                log('‚ùå N√£o foi poss√≠vel testar - bot√£o n√£o encontrado', 'error');
            }
        }
        
        function testAgendaModal() {
            clearLog();
            log('üîç Testando abertura do modal...', 'info');
            
            // Verificar se a fun√ß√£o existe
            if (typeof window.openAgendaModal === 'function') {
                try {
                    window.openAgendaModal();
                    log('‚úÖ Fun√ß√£o openAgendaModal executada', 'success');
                } catch (error) {
                    log(`‚ùå Erro ao executar openAgendaModal: ${error.message}`, 'error');
                }
            } else {
                log('‚ùå Fun√ß√£o openAgendaModal n√£o encontrada', 'error');
                
                // Tentar abrir modal manualmente
                const modal = document.getElementById('agendaModal');
                if (modal) {
                    modal.classList.remove('hidden');
                    log('‚úÖ Modal aberto manualmente', 'success');
                    
                    setTimeout(() => {
                        modal.classList.add('hidden');
                        log('‚úÖ Modal fechado automaticamente', 'info');
                    }, 3000);
                }
            }
        }
        
        // Auto-executar verifica√ß√£o inicial
        setTimeout(() => {
            log('üöÄ Iniciando debug autom√°tico...', 'info');
            debugElements();
        }, 1000);
    </script>
</body>
</html>