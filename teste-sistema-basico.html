<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Teste Sistema BÃ¡sico</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #1d4ed8;
        }
        .log-area {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Teste Sistema BÃ¡sico</h1>
        <p>VerificaÃ§Ã£o de erros de sintaxe e carregamento</p>
        
        <div>
            <button class="test-button" onclick="testFirebaseImports()">
                ğŸ”¥ Testar Imports Firebase
            </button>
            <button class="test-button" onclick="testAppJS()">
                ğŸ“± Testar app.js
            </button>
            <button class="test-button" onclick="testElements()">
                ğŸ¯ Testar Elementos DOM
            </button>
            <button class="test-button" onclick="clearLog()">
                ğŸ§¹ Limpar Log
            </button>
        </div>
        
        <div id="logArea" class="log-area">
            <div class="info">ğŸš€ Sistema de teste inicializado</div>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logArea = document.getElementById('logArea');
            const timestamp = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = `[${timestamp}] ${message}`;
            logArea.appendChild(div);
            logArea.scrollTop = logArea.scrollHeight;
        }

        function clearLog() {
            document.getElementById('logArea').innerHTML = '';
            log('ğŸ§¹ Log limpo', 'info');
        }

        function testFirebaseImports() {
            log('ğŸ”¥ Testando imports do Firebase...', 'info');
            
            try {
                // Testar se os scripts Firebase estÃ£o carregando
                const scripts = document.querySelectorAll('script[src*="firebase"]');
                log(`   Scripts Firebase encontrados: ${scripts.length}`, 'info');
                
                // Verificar se Firebase estÃ¡ disponÃ­vel
                if (typeof firebase !== 'undefined') {
                    log('âœ… Firebase SDK disponÃ­vel', 'success');
                } else {
                    log('âŒ Firebase SDK nÃ£o encontrado', 'error');
                }
                
            } catch (error) {
                log(`âŒ Erro ao testar Firebase: ${error.message}`, 'error');
            }
        }

        function testAppJS() {
            log('ğŸ“± Testando carregamento do app.js...', 'info');
            
            try {
                // Criar script para testar app.js
                const script = document.createElement('script');
                script.src = 'app.js';
                script.type = 'module';
                
                script.onload = () => {
                    log('âœ… app.js carregado com sucesso', 'success');
                };
                
                script.onerror = (error) => {
                    log(`âŒ Erro ao carregar app.js: ${error.message}`, 'error');
                };
                
                // NÃ£o adicionar ao DOM para evitar conflitos, apenas testar
                log('   Testando sintaxe do app.js...', 'info');
                
                // Fazer fetch para verificar se o arquivo existe
                fetch('app.js')
                    .then(response => {
                        if (response.ok) {
                            log('âœ… app.js encontrado e acessÃ­vel', 'success');
                            return response.text();
                        } else {
                            throw new Error(`HTTP ${response.status}`);
                        }
                    })
                    .then(code => {
                        log(`   Tamanho do arquivo: ${Math.round(code.length / 1024)}KB`, 'info');
                        
                        // Verificar por erros de sintaxe Ã³bvios
                        const duplicateShowToast = (code.match(/function showToast/g) || []).length;
                        if (duplicateShowToast > 1) {
                            log(`âŒ FunÃ§Ã£o showToast duplicada (${duplicateShowToast} vezes)`, 'error');
                        } else {
                            log('âœ… FunÃ§Ã£o showToast Ãºnica', 'success');
                        }
                        
                        // Verificar outras funÃ§Ãµes crÃ­ticas
                        const criticalFunctions = [
                            'showPainelLoading',
                            'ensurePainelApartamentosLoaded',
                            'renderPaymentsTable',
                            'applyFilters'
                        ];
                        
                        criticalFunctions.forEach(func => {
                            if (code.includes(`function ${func}`) || code.includes(`${func} =`)) {
                                log(`âœ… FunÃ§Ã£o ${func} encontrada`, 'success');
                            } else {
                                log(`âŒ FunÃ§Ã£o ${func} nÃ£o encontrada`, 'error');
                            }
                        });
                        
                    })
                    .catch(error => {
                        log(`âŒ Erro ao acessar app.js: ${error.message}`, 'error');
                    });
                
            } catch (error) {
                log(`âŒ Erro ao testar app.js: ${error.message}`, 'error');
            }
        }

        function testElements() {
            log('ğŸ¯ Testando elementos DOM...', 'info');
            
            const criticalElements = [
                'painelLoading',
                'toast',
                'filterCondominio',
                'filterBloco',
                'filterMes',
                'clearFilters',
                'paymentsTableBody',
                'tableInfo'
            ];
            
            criticalElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    log(`âœ… Elemento #${elementId} encontrado`, 'success');
                } else {
                    log(`âŒ Elemento #${elementId} nÃ£o encontrado`, 'error');
                }
            });
        }

        // Testar automaticamente ao carregar
        setTimeout(() => {
            log('ğŸ” Executando testes automÃ¡ticos...', 'info');
            testFirebaseImports();
            testAppJS();
        }, 1000);
    </script>
</body>
</html>