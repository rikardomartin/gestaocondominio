<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Usu√°rios Demo - Simples</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            text-align: center;
            margin-bottom: 30px;
        }
        .user-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2563eb;
        }
        .user-card h3 {
            margin: 0 0 10px 0;
            color: #1e40af;
        }
        .user-card p {
            margin: 5px 0;
            color: #64748b;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin: 20px 0;
            font-weight: 600;
        }
        button:hover {
            background: #1d4ed8;
        }
        button:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }
        .status {
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-weight: 500;
        }
        .success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        .error {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }
        .info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }
        .warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .loading {
            text-align: center;
            color: #64748b;
        }
        .step {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #0ea5e9;
        }
        .step h4 {
            margin: 0 0 10px 0;
            color: #0ea5e9;
        }
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #1e293b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Criar Usu√°rios Demo - Vers√£o Simples</h1>
        
        <div class="info">
            <strong>‚ÑπÔ∏è Vers√£o Simplificada:</strong><br>
            Esta vers√£o cria apenas as contas no Firebase Authentication. Os perfis ser√£o criados automaticamente no primeiro login.
        </div>

        <div class="step">
            <h4>üìã Usu√°rios que ser√£o criados:</h4>
            
            <div class="user-card">
                <h3>üë®‚Äçüíº Administrador</h3>
                <p><strong>Email:</strong> <code>admin@condominio.com</code></p>
                <p><strong>Senha:</strong> <code>123456</code></p>
                <p><strong>Permiss√µes:</strong> Acesso total ao sistema</p>
            </div>

            <div class="user-card">
                <h3>üë®‚Äçüíª Operador</h3>
                <p><strong>Email:</strong> <code>operador@condominio.com</code></p>
                <p><strong>Senha:</strong> <code>123456</code></p>
                <p><strong>Permiss√µes:</strong> Registrar pagamentos e consultas</p>
            </div>

            <div class="user-card">
                <h3>üëÅÔ∏è Visualizador</h3>
                <p><strong>Email:</strong> <code>viewer@condominio.com</code></p>
                <p><strong>Senha:</strong> <code>123456</code></p>
                <p><strong>Permiss√µes:</strong> Apenas leitura</p>
            </div>
        </div>

        <button id="createBtn" onclick="createUsersSimple()">
            üöÄ Criar Usu√°rios (Vers√£o Simples)
        </button>

        <div id="status"></div>

        <div class="step">
            <h4>üîÑ Ap√≥s criar os usu√°rios:</h4>
            <p>1. Volte para <a href="https://gestaodoscondominios.web.app" target="_blank">a aplica√ß√£o principal</a></p>
            <p>2. Fa√ßa login com <code>admin@condominio.com</code> / <code>123456</code></p>
            <p>3. O perfil ser√° criado automaticamente no primeiro login</p>
            <p>4. Clique em "Criar Estrutura" para inicializar os condom√≠nios</p>
        </div>
    </div>

    <script type="module">
        import { createUserWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { auth } from './firebase-config.js';

        const demoUsers = [
            {
                email: 'admin@condominio.com',
                password: '123456',
                name: 'Administrador Sistema',
                role: 'admin'
            },
            {
                email: 'operador@condominio.com', 
                password: '123456',
                name: 'Operador Pagamentos',
                role: 'operator'
            },
            {
                email: 'viewer@condominio.com',
                password: '123456', 
                name: 'Usu√°rio Visualiza√ß√£o',
                role: 'viewer'
            }
        ];

        window.createUsersSimple = async function() {
            const btn = document.getElementById('createBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Criando usu√°rios...';
            status.innerHTML = '<div class="info loading">Conectando ao Firebase Authentication...</div>';
            
            let results = [];
            let hasErrors = false;
            
            try {
                for (const userData of demoUsers) {
                    try {
                        status.innerHTML = `<div class="info loading">Criando usu√°rio: ${userData.email}...</div>`;
                        
                        // Criar usu√°rio apenas no Firebase Auth (sem Firestore)
                        const userCredential = await createUserWithEmailAndPassword(
                            auth, 
                            userData.email, 
                            userData.password
                        );
                        
                        const user = userCredential.user;
                        
                        // Atualizar perfil do usu√°rio
                        await updateProfile(user, {
                            displayName: userData.name
                        });
                        
                        results.push(`‚úÖ <strong>${userData.email}</strong> (${userData.role}) - Conta criada no Authentication`);
                        
                    } catch (error) {
                        if (error.code === 'auth/email-already-in-use') {
                            results.push(`‚ö†Ô∏è <strong>${userData.email}</strong> - Usu√°rio j√° existe`);
                        } else {
                            results.push(`‚ùå <strong>${userData.email}</strong> - Erro: ${error.message}`);
                            hasErrors = true;
                        }
                    }
                }
                
                const statusClass = hasErrors ? 'warning' : 'success';
                const title = hasErrors ? '‚ö†Ô∏è Configura√ß√£o Conclu√≠da com Avisos' : 'üéâ Usu√°rios Criados no Authentication!';
                
                status.innerHTML = `
                    <div class="${statusClass}">
                        <strong>${title}</strong><br><br>
                        ${results.join('<br>')}
                        <br><br>
                        <div class="info">
                            <strong>‚ÑπÔ∏è Importante:</strong><br>
                            Os perfis no Firestore ser√£o criados automaticamente no primeiro login de cada usu√°rio.
                        </div>
                        <br>
                        <strong>‚úÖ Pr√≥ximos passos:</strong><br>
                        1. <a href="https://gestaodoscondominios.web.app" target="_blank">Abrir a aplica√ß√£o</a><br>
                        2. Fazer login com <code>admin@condominio.com</code> / <code>123456</code><br>
                        3. O sistema criar√° o perfil automaticamente<br>
                        4. Clicar em "Criar Estrutura" para inicializar os condom√≠nios<br>
                        5. Come√ßar a usar o sistema!
                    </div>
                `;
                
                btn.textContent = '‚úÖ Usu√°rios Criados';
                
            } catch (error) {
                console.error('Erro geral:', error);
                status.innerHTML = `
                    <div class="error">
                        <strong>‚ùå Erro na Configura√ß√£o</strong><br><br>
                        Erro: ${error.message}<br><br>
                        <strong>Poss√≠veis solu√ß√µes:</strong><br>
                        1. Verifique sua conex√£o com a internet<br>
                        2. Certifique-se de que o Firebase est√° configurado corretamente<br>
                        3. Tente recarregar a p√°gina e executar novamente
                    </div>
                `;
                
                btn.disabled = false;
                btn.textContent = 'üîÑ Tentar Novamente';
            }
        };
    </script>
</body>
</html>